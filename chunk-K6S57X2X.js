import{a as A}from"./chunk-V2JV27JX.js";import{a as L}from"./chunk-AQA3PCK4.js";import{a as B,b as D,i as N,j as $,l as H,n as G}from"./chunk-YTHTS2EK.js";import{$ as R,A as f,B as M,F as O,G as k,H as w,I,L as E,W as z,aa as q,g as _,h as b,ha as j,i as y,ia as F,j as P,k as o,l as u,la as V,m as v,n as h,o as C,p as m,q as t,r as i,s as c,t as x,u as p,v as g,x as S,z as l}from"./chunk-26DWTNIE.js";import"./chunk-ABKQFRDF.js";import"./chunk-JSQBYJDC.js";import"./chunk-RRJEHXKK.js";import"./chunk-GZDTMPMM.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-YAUMUHNT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var J=()=>[1,2,3,4];function K(s,a){if(s&1&&c(0,"span",26),s&2){let d=a.$implicit,n=g();S("completed",d<=n.timerState.completedSessions)}}function Q(s,a){if(s&1){let d=x();t(0,"ion-button",27),p("click",function(){_(d);let r=g();return b(r.pauseTimer())}),c(1,"ion-icon",28),i()}}function U(s,a){if(s&1){let d=x();t(0,"ion-button",29),p("click",function(){_(d);let r=g();return b(r.resumeTimer())}),c(1,"ion-icon",30),i()}}var ae=(()=>{let a=class a{constructor(n,r,e){this.timerService=n,this.storage=r,this.router=e,this.timerState={isRunning:!1,isPaused:!1,timeRemaining:0,totalTime:0,currentType:null,sessionNumber:1,completedSessions:0},this.displayTime="00:00",this.progress=0,B({pause:N,play:$,square:G,refresh:H,arrowBack:D})}ngOnInit(){this.timerSubscription=this.timerService.timerState$.subscribe(n=>{this.timerState=n,this.displayTime=this.formatTime(n.timeRemaining),this.progress=this.timerService.getProgress(),n.timeRemaining===0&&!n.isRunning&&n.currentType&&this.router.navigate(["/notification"])})}ngOnDestroy(){this.timerSubscription&&this.timerSubscription.unsubscribe()}pauseTimer(){this.timerService.pauseTimer()}resumeTimer(){this.timerService.resumeTimer()}stopTimer(){this.timerService.stopTimer(),this.router.navigate(["/tabs/tab1"])}restartTimer(){this.timerService.restartTimer()}goBack(){this.timerState.isRunning||this.timerState.isPaused?this.router.navigate(["/tabs/tab1"]):this.router.navigate(["/tabs/tab1"])}formatTime(n){let r=Math.floor(n/60),e=n%60;return`${r.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}get sessionTypeText(){return this.timerState.currentType==="enfoque"?"Sesi\xF3n de Enfoque":"Sesi\xF3n de Descanso"}get sessionTypeColor(){return this.timerState.currentType==="enfoque"?"primary":"secondary"}get progressDegrees(){return this.progress/100*360}};a.\u0275fac=function(r){return new(r||a)(u(A),u(L),u(E))},a.\u0275cmp=v({type:a,selectors:[["app-timer"]],decls:38,vars:17,consts:[[3,"translucent"],[3,"color"],["slot","start","fill","clear",3,"click"],["name","arrow-back"],[1,"ion-text-center"],[1,"timer-content",3,"fullscreen"],[1,"timer-container"],[1,"circular-timer"],["viewBox","0 0 200 200",1,"timer-svg"],["cx","100","cy","100","r","85","fill","none","stroke-width","12",1,"timer-circle-bg"],["cx","100","cy","100","r","85","fill","none","stroke-width","12",1,"timer-circle-progress"],[1,"timer-display"],[1,"time-text"],[1,"time-label"],[1,"session-info"],[1,"session-counter"],[1,"session-dots"],["class","dot",3,"completed",4,"ngFor","ngForOf"],[1,"controls"],["class","control-btn pause-btn","shape","round","size","large",3,"click",4,"ngIf"],["class","control-btn play-btn","shape","round","size","large","color","success",3,"click",4,"ngIf"],["shape","round","size","large","fill","outline",1,"control-btn","restart-btn",3,"click"],["slot","icon-only","name","refresh"],["shape","round","size","large","fill","outline","color","danger",1,"control-btn","stop-btn",3,"click"],["slot","icon-only","name","square"],[1,"control-labels"],[1,"dot"],["shape","round","size","large",1,"control-btn","pause-btn",3,"click"],["slot","icon-only","name","pause"],["shape","round","size","large","color","success",1,"control-btn","play-btn",3,"click"],["slot","icon-only","name","play"]],template:function(r,e){r&1&&(t(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-button",2),p("click",function(){return e.goBack()}),c(3,"ion-icon",3),i(),t(4,"ion-title",4)(5,"strong"),l(6),i()()()(),t(7,"ion-content",5)(8,"div",6)(9,"div",7),y(),t(10,"svg",8),c(11,"circle",9)(12,"circle",10),i(),P(),t(13,"div",11)(14,"div",12),l(15),i(),t(16,"div",13),l(17,"restantes"),i()()(),t(18,"div",14)(19,"div",15)(20,"span"),l(21),i()(),t(22,"div",16),h(23,K,1,2,"span",17),i()(),t(24,"div",18),h(25,Q,2,0,"ion-button",19)(26,U,2,0,"ion-button",20),t(27,"ion-button",21),p("click",function(){return e.restartTimer()}),c(28,"ion-icon",22),i(),t(29,"ion-button",23),p("click",function(){return e.stopTimer()}),c(30,"ion-icon",24),i()(),t(31,"div",25)(32,"span"),l(33),i(),t(34,"span"),l(35,"Reiniciar"),i(),t(36,"span"),l(37,"Detener"),i()()()()),r&2&&(m("translucent",!0),o(),m("color",e.sessionTypeColor),o(5),f(e.sessionTypeText),o(),m("fullscreen",!0),o(5),S("enfoque",e.timerState.currentType==="enfoque")("descanso",e.timerState.currentType==="descanso"),C("stroke-dasharray",534)("stroke-dashoffset",534-534*e.progress/100),o(3),f(e.displayTime),o(6),M("Sesi\xF3n ",e.timerState.sessionNumber," de 4 completadas"),o(2),m("ngForOf",O(16,J)),o(2),m("ngIf",!e.timerState.isPaused&&e.timerState.isRunning),o(),m("ngIf",e.timerState.isPaused),o(7),f(e.timerState.isPaused?"Reanudar":"Pausar"))},dependencies:[I,k,w,q,F,j,R,z,V],styles:[".timer-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)}.timer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:20px;color:#fff}.circular-timer[_ngcontent-%COMP%]{position:relative;width:280px;height:280px;margin:40px 0}.timer-svg[_ngcontent-%COMP%]{transform:rotate(-90deg);width:100%;height:100%}.timer-circle-bg[_ngcontent-%COMP%]{stroke:#fff3}.timer-circle-progress[_ngcontent-%COMP%]{transition:stroke-dashoffset .3s linear;stroke-linecap:round}.timer-circle-progress.enfoque[_ngcontent-%COMP%]{stroke:#4ade80}.timer-circle-progress.descanso[_ngcontent-%COMP%]{stroke:#f87171}.timer-display[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.time-text[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;line-height:1;margin-bottom:8px;text-shadow:0 2px 10px rgba(0,0,0,.2)}.time-label[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;text-transform:lowercase}.session-info[_ngcontent-%COMP%]{text-align:center;margin:20px 0}.session-counter[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:12px;opacity:.95}.session-dots[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.session-dots[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;background-color:#ffffff4d;transition:all .3s ease}.session-dots[_ngcontent-%COMP%]   .dot.completed[_ngcontent-%COMP%]{background-color:#4ade80;box-shadow:0 0 10px #4ade8080}.controls[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin:30px 0 10px}.controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{--border-radius: 50%;width:70px;height:70px;font-size:1.8rem}.controls[_ngcontent-%COMP%]   .control-btn.pause-btn[_ngcontent-%COMP%], .controls[_ngcontent-%COMP%]   .control-btn.play-btn[_ngcontent-%COMP%]{width:90px;height:90px;font-size:2.5rem;box-shadow:0 4px 20px #0000004d}.control-labels[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;font-size:.85rem;opacity:.85}.control-labels[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:70px;text-align:center}.control-labels[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{width:90px}"]});let s=a;return s})();export{ae as TimerPage};
