import{a as U}from"./chunk-NM3PSTDC.js";import"./chunk-SQL4RJQR.js";import{a as G,c as J,d as Q,p as R}from"./chunk-YTHTS2EK.js";import{A as S,B as _,C,D as v,E as b,F as M,H as P,I as O,J as I,K as D,L as w,M as F,T as E,U as T,V as k,Z as z,da as B,ea as q,fa as N,ga as H,ha as L,ia as W,k as a,l as h,la as A,m as x,ma as j,n as g,p as c,pa as K,q as t,r as s,ra as V,s as f,u as y,v as u,z as d}from"./chunk-XV66CBGI.js";import"./chunk-ABKQFRDF.js";import"./chunk-JSQBYJDC.js";import"./chunk-RRJEHXKK.js";import"./chunk-GZDTMPMM.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-YAUMUHNT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function X(i,r){i&1&&(t(0,"div",11),f(1,"ion-icon",12),t(2,"h2"),d(3,"No hay sesiones registradas"),s(),t(4,"p"),d(5,"Completa tu primera sesi\xF3n de enfoque para verla aqu\xED"),s()())}function Y(i,r){if(i&1&&(t(0,"ion-item",19),f(1,"ion-icon",20),t(2,"ion-label")(3,"h3"),d(4),s(),t(5,"p"),d(6),s()(),t(7,"ion-badge",21),d(8),s()()),i&2){let l=r.$implicit,e=u(3);a(),c("name",e.getSessionIcon(l.type))("color",e.getSessionColor(l.type)),a(3),S(l.startTime),a(2),_("",l.duration," min"),a(),c("color",e.getSessionColor(l.type)),a(),_(" ",l.type==="enfoque"?"Enfoque":"Descanso"," ")}}function Z(i,r){if(i&1&&(t(0,"div",15)(1,"div",16),f(2,"ion-icon",12),t(3,"span"),d(4),P(5,"date"),s()(),t(6,"ion-list",17),g(7,Y,9,6,"ion-item",18),s()()),i&2){let l=r.$implicit,e=u(2);a(4),C("",e.formatDate(l.sessions[0].date)," - ",O(5,3,l.sessions[0].date,"d MMM yyyy")),a(3),c("ngForOf",l.sessions)}}function $(i,r){if(i&1&&(t(0,"div",13),g(1,Z,8,6,"div",14),s()),i&2){let l=u();a(),c("ngForOf",l.groupSessionsByDate())}}var me=(()=>{let r=class r{constructor(e){this.statisticsService=e,this.sessions=[],this.filteredSessions=[],this.selectedFilter="all",G({time:R,cafe:J,calendar:Q})}ngOnInit(){this.loadSessions()}ionViewWillEnter(){this.loadSessions()}loadSessions(){this.sessions=this.statisticsService.getAllSessions(),this.applyFilter()}onFilterChange(e){this.selectedFilter=e.detail.value,this.applyFilter()}applyFilter(){let e=new Date,n=e.toDateString();switch(this.selectedFilter){case"today":this.filteredSessions=this.sessions.filter(m=>new Date(m.date).toDateString()===n);break;case"week":let o=new Date(e.getTime()-10080*60*1e3);this.filteredSessions=this.sessions.filter(m=>new Date(m.date)>=o);break;default:this.filteredSessions=this.sessions}}formatDate(e){let n=new Date(e),o=new Date().toDateString(),m=new Date(Date.now()-864e5).toDateString();return n.toDateString()===o?"Hoy":n.toDateString()===m?"Ayer":n.toLocaleDateString("es-ES",{day:"numeric",month:"short"})}getSessionIcon(e){return e==="enfoque"?"time":"cafe"}getSessionColor(e){return e==="enfoque"?"success":"secondary"}groupSessionsByDate(){let e={};return this.filteredSessions.forEach(n=>{let o=new Date(n.date).toDateString();e[o]||(e[o]=[]),e[o].push(n)}),Object.keys(e).map(n=>({date:n,sessions:e[n]}))}};r.\u0275fac=function(n){return new(n||r)(h(U))},r.\u0275cmp=x({type:r,selectors:[["app-tab3"]],decls:20,vars:5,consts:[[3,"translucent"],["color","primary"],[1,"ion-text-center"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","today"],["value","week"],[3,"fullscreen"],[1,"history-container"],["class","empty-state",4,"ngIf"],["class","sessions-list",4,"ngIf"],[1,"empty-state"],["name","calendar"],[1,"sessions-list"],["class","date-group",4,"ngFor","ngForOf"],[1,"date-group"],[1,"date-header"],[1,"session-items"],["class","session-item",4,"ngFor","ngForOf"],[1,"session-item"],["slot","start",1,"session-icon",3,"name","color"],["slot","end",3,"color"]],template:function(n,o){n&1&&(t(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2)(3,"strong"),d(4,"Historial"),s()()(),t(5,"ion-toolbar")(6,"ion-segment",3),M("ngModelChange",function(p){return b(o.selectedFilter,p)||(o.selectedFilter=p),p}),y("ionChange",function(p){return o.onFilterChange(p)}),t(7,"ion-segment-button",4)(8,"ion-label"),d(9,"Todo"),s()(),t(10,"ion-segment-button",5)(11,"ion-label"),d(12,"Hoy"),s()(),t(13,"ion-segment-button",6)(14,"ion-label"),d(15,"Esta semana"),s()()()()(),t(16,"ion-content",7)(17,"div",8),g(18,X,6,0,"div",9)(19,$,2,1,"div",10),s()()),n&2&&(c("translucent",!0),a(6),v("ngModel",o.selectedFilter),a(10),c("fullscreen",!0),a(2),c("ngIf",o.filteredSessions.length===0),a(),c("ngIf",o.filteredSessions.length>0))},dependencies:[F,I,D,k,E,T,q,j,A,B,L,N,H,z,K,V,W,w],styles:[".history-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;opacity:.5;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:10px;color:var(--ion-color-dark)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.sessions-list[_ngcontent-%COMP%]{padding-bottom:20px}.date-group[_ngcontent-%COMP%]{margin-bottom:24px}.date-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:var(--ion-color-light);border-radius:8px;margin-bottom:8px;font-weight:600;color:var(--ion-color-dark);font-size:.9rem}.date-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--ion-color-primary)}.session-items[_ngcontent-%COMP%]{background:transparent}.session-items[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: white;--border-radius: 8px;--padding-start: 16px;--padding-end: 16px;--inner-padding-end: 0;margin-bottom:8px;border-radius:8px;box-shadow:0 2px 8px #00000014}.session-items[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){border-radius:8px}.session-icon[_ngcontent-%COMP%]{font-size:1.8rem;margin-right:12px}ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--ion-color-dark);margin-bottom:4px}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium)}ion-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:6px 12px;border-radius:12px;font-weight:600}ion-segment[_ngcontent-%COMP%]{padding:8px}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--indicator-color: var(--ion-color-primary);font-size:.9rem;min-height:36px}"]});let i=r;return i})();export{me as Tab3Page};
