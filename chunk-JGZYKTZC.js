import{a as q}from"./chunk-AR7TQDRQ.js";import"./chunk-AQA3PCK4.js";import{a as V,d as L,g as N,k as R,o as W}from"./chunk-YTHTS2EK.js";import{$ as z,A as p,B as x,G as S,H as O,I as k,L as P,V as w,W as I,X as E,Y as T,Z as D,_ as H,aa as j,ha as B,i as v,ia as F,j as b,k as r,l as u,la as $,m as C,n as f,p as d,q as n,r as i,s as m,u as _,v as g,w as y,y as M,z as a}from"./chunk-26DWTNIE.js";import"./chunk-ABKQFRDF.js";import"./chunk-JSQBYJDC.js";import"./chunk-RRJEHXKK.js";import"./chunk-GZDTMPMM.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-YAUMUHNT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function G(s,l){if(s&1&&(n(0,"span",33),a(1),i()),s&2){let c=g().$implicit,e=g();r(),x(" ",e.weeklyStats.days[c].toFixed(0),"h ")}}function J(s,l){if(s&1&&(n(0,"div",28)(1,"div",29)(2,"div",30),f(3,G,2,1,"span",31),i()(),n(4,"div",32),a(5),i()()),s&2){let c=l.$implicit,e=g();r(2),M(e.getBarClass(c)),y("height",e.getBarHeight(c),"%"),r(),d("ngIf",e.weeklyStats&&e.weeklyStats.days[c]>0),r(2),p(c)}}var nt=(()=>{let l=class l{constructor(e,o){this.statisticsService=e,this.router=o,this.weekDays=["L","M","X","J","V","S","D"],this.maxHours=3,V({statsChart:W,flame:N,calendar:L,playCircle:R})}ngOnInit(){this.loadStatistics()}ionViewWillEnter(){this.loadStatistics()}loadStatistics(){if(this.weeklyStats=this.statisticsService.getWeeklyStats(),this.todayStats=this.statisticsService.getTodayStats(),this.weeklyStats){let e=Math.max(...Object.values(this.weeklyStats.days));this.maxHours=Math.max(3,Math.ceil(e))}}getBarHeight(e){return this.weeklyStats?(this.weeklyStats.days[e]||0)/this.maxHours*100:0}getBarClass(e){let o=this.weekDays.indexOf(e),t=new Date().getDay(),h=t===0?6:t-1;return o===h?"today":"past"}formatHours(e){let o=Math.floor(e/60),t=e%60;return o>0?`${o}h ${t}m`:`${t}m`}startSession(){this.router.navigate(["/tabs/tab1"])}};l.\u0275fac=function(o){return new(o||l)(u(q),u(P))},l.\u0275cmp=C({type:l,selectors:[["app-tab2"]],decls:46,vars:9,consts:[[3,"translucent"],["color","primary"],[1,"ion-text-center"],[1,"ion-padding",3,"fullscreen"],[1,"stats-container"],[1,"summary-card"],[1,"today-summary"],[1,"circular-progress"],["viewBox","0 0 100 100"],["cx","50","cy","50","r","40",1,"progress-bg"],["cx","50","cy","50","r","40",1,"progress-circle"],[1,"time-center"],[1,"time-value"],[1,"time-label"],[1,"summary-info"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],["expand","block",1,"session-btn",3,"click"],["slot","start","name","play-circle"],[1,"section-title"],["name","stats-chart"],[1,"chart-container"],[1,"chart"],["class","bar-wrapper",4,"ngFor","ngForOf"],[1,"week-summary"],["color","warning"],["name","flame"],[1,"bar-wrapper"],[1,"bar-container"],[1,"bar"],["class","bar-value",4,"ngIf"],[1,"bar-label"],[1,"bar-value"]],template:function(o,t){o&1&&(n(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2)(3,"strong"),a(4,"Estad\xEDsticas"),i()()()(),n(5,"ion-content",3)(6,"div",4)(7,"ion-card",5)(8,"ion-card-content")(9,"div",6)(10,"div",7),v(),n(11,"svg",8),m(12,"circle",9)(13,"circle",10),i(),b(),n(14,"div",11)(15,"div",12),a(16),i(),n(17,"div",13),a(18,"restantes"),i()()(),n(19,"div",14)(20,"div",15)(21,"div",16),a(22,"Tiempo total"),i(),n(23,"div",17),a(24),i()(),n(25,"div",15)(26,"div",16),a(27,"Sesiones"),i(),n(28,"div",17),a(29),i()()()(),n(30,"ion-button",18),_("click",function(){return t.startSession()}),m(31,"ion-icon",19),a(32," Sesi\xF3n de Enfoque "),i()()(),n(33,"ion-card")(34,"ion-card-header")(35,"ion-card-title",20),m(36,"ion-icon",21),a(37," Tiempo por d\xEDa "),i()(),n(38,"ion-card-content")(39,"div",22)(40,"div",23),f(41,J,6,6,"div",24),i()(),n(42,"div",25)(43,"ion-badge",26),m(44,"ion-icon",27),a(45),i()()()()()()),o&2&&(d("translucent",!0),r(5),d("fullscreen",!0),r(8),y("stroke-dashoffset",251-251*((t.todayStats==null?null:t.todayStats.totalMinutes)||0)/1500),r(3),p(t.formatHours((t.todayStats==null?null:t.todayStats.totalMinutes)||0)),r(8),p(t.formatHours((t.weeklyStats==null?null:t.weeklyStats.totalMinutes)||0)),r(5),p((t.todayStats==null?null:t.todayStats.sessions)||0),r(12),d("ngForOf",t.weekDays),r(4),x(" Racha actual: ",(t.weeklyStats==null?null:t.weeklyStats.currentStreak)||0," d\xEDas "))},dependencies:[k,S,O,j,F,B,z,E,D,H,T,I,$,w],styles:[".stats-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.today-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:20px}.circular-progress[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;flex-shrink:0}.circular-progress[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(-90deg)}.circular-progress[_ngcontent-%COMP%]   .progress-bg[_ngcontent-%COMP%]{fill:none;stroke:#fff3;stroke-width:8}.circular-progress[_ngcontent-%COMP%]   .progress-circle[_ngcontent-%COMP%]{fill:none;stroke:#4ade80;stroke-width:8;stroke-linecap:round;stroke-dasharray:251;transition:stroke-dashoffset .5s ease}.time-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.time-center[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;line-height:1}.time-center[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8;margin-top:4px}.summary-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:15px}.summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.85rem;opacity:.9;margin-bottom:4px}.summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700}.session-btn[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .2);--background-hover: rgba(255, 255, 255, .3);--border-radius: 12px;height:48px;font-weight:600;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:1.2rem;color:var(--ion-color-primary)}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4rem}.chart-container[_ngcontent-%COMP%]{padding:20px 0}.chart[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-around;height:200px;gap:8px}.bar-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center}.bar-container[_ngcontent-%COMP%]{width:100%;height:180px;display:flex;align-items:flex-end;justify-content:center}.bar[_ngcontent-%COMP%]{width:100%;max-width:40px;background:var(--ion-color-medium);border-radius:8px 8px 0 0;position:relative;transition:all .3s ease;min-height:4px;display:flex;align-items:flex-start;justify-content:center;padding-top:8px}.bar.past[_ngcontent-%COMP%]{background:linear-gradient(to top,#667eea,#764ba2)}.bar.today[_ngcontent-%COMP%]{background:linear-gradient(to top,#4ade80,#22c55e);box-shadow:0 0 15px #4ade8080}.bar-value[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.2)}.bar-label[_ngcontent-%COMP%]{margin-top:8px;font-size:.85rem;font-weight:600;color:var(--ion-color-dark)}.week-summary[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.week-summary[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{padding:8px 16px;font-size:.95rem;font-weight:600}.week-summary[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;vertical-align:middle}"]});let s=l;return s})();export{nt as Tab2Page};
